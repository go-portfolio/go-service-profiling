# Go Profiling Service üöÄ

–°–µ—Ä–≤–∏—Å –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è CPU, –ø–∞–º—è—Ç–∏ –∏ –∑–∞–¥–µ—Ä–∂–µ–∫ –≤ Go
---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone <your-repo-url>
cd go-service-profiling
```
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
go mod tidy
```
3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
```bash
make run
```
–°–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:8080

## ‚öôÔ∏è –î–æ—Å—Ç—É–ø–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
| URL             | –û–ø–∏—Å–∞–Ω–∏–µ                                                |
| --------------- | ------------------------------------------------------- |
| `/`             | –ö–æ—Ä–Ω–µ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞, —Å–æ–æ–±—â–∞–µ—Ç —á—Ç–æ —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω          |
| `/work`         | –ò–º–∏—Ç–∏—Ä—É–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É CPU                                  |
| `/alloc`        | –ò–º–∏—Ç–∏—Ä—É–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –∏ —Å–±–æ—Ä–∫—É –º—É—Å–æ—Ä–∞              |
| `/sleep`        | –ò–º–∏—Ç–∏—Ä—É–µ—Ç –∑–∞–¥–µ—Ä–∂–∫—É (sleep)                              |
| `/metrics`      | –≠–∫—Å–ø–æ—Ä—Ç –º–µ—Ç—Ä–∏–∫ Prometheus                               |
| `/debug/pprof/` | –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ pprof (CPU, heap, goroutine –∏ –¥—Ä.) |


## üìä –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
CPU –ø—Ä–æ—Ñ–∞–π–ª
```bash
./scripts/profile-cpu.sh
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è cpu.prof
# –î–∞–ª–µ–µ –æ—Ç–∫—Ä–æ–µ–º –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
go tool pprof -http=:8081 ./bin/service cpu.prof
```
Heap –ø—Ä–æ—Ñ–∞–π–ª (–ø–∞–º—è—Ç—å)
```bash
./scripts/profile-heap.sh
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è heap.prof
# –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
go tool pprof -http=:8081 ./bin/service heap.prof
```
–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å pprof –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ –∏–∑—É—á–∞—Ç—å, –∫–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ—Ç—Ä–µ–±–ª—è—é—Ç CPU –∏ –ø–∞–º—è—Ç—å.

##  –ë–µ–Ω—á–º–∞—Ä–∫–∏
–ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –±–µ–Ω—á–º–∞—Ä–∫–æ–≤ —Å –∏–∑–º–µ—Ä–µ–Ω–∏–µ–º –ø–∞–º—è—Ç–∏:

bash
```
make bench
```
-bench=. ‚Äî –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö –±–µ–Ω—á–º–∞—Ä–∫–æ–≤

-benchmem ‚Äî –∏–∑–º–µ—Ä–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏

## üê≥ Docker
–°–±–æ—Ä–∫–∞ Docker-–æ–±—Ä–∞–∑–∞:

```bash
make docker-build
```
–ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

```bash
docker run -p 8080:8080 go-service-profiling:latest
```
## üìà –ú–µ—Ç—Ä–∏–∫–∏ Prometheus
–°–µ—Ä–≤–∏—Å —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞ /metrics.
–ü—Ä–∏–º–µ—Ä –º–µ—Ç—Ä–∏–∫–∏:

```nginx
http_requests_total 42
```
`http_requests_total` ‚Äî –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —Å–µ—Ä–≤–∏—Å—É


## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```bash
go-service-profiling/
‚îú‚îÄ‚îÄ cmd/server/          # main.go ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ handlers/        # HTTP-—Ö–µ–Ω–¥–ª–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ metrics/         # –º–µ—Ç—Ä–∏–∫–∏ Prometheus
‚îÇ   ‚îî‚îÄ‚îÄ workload/        # —Ñ—É–Ω–∫—Ü–∏–∏ –∏–º–∏—Ç–∞—Ü–∏–∏ –Ω–∞–≥—Ä—É–∑–∫–∏ (CPU, memory, sleep)
‚îú‚îÄ‚îÄ tests/               # —Ç–µ—Å—Ç—ã –∏ –±–µ–Ω—á–º–∞—Ä–∫–∏
‚îú‚îÄ‚îÄ scripts/             # —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è (CPU, heap –∏ –¥—Ä.)
‚îú‚îÄ‚îÄ bin/                 # —Å–æ–±—Ä–∞–Ω–Ω—ã–π –±–∏–Ω–∞—Ä–Ω–∏–∫
‚îú‚îÄ‚îÄ Makefile             # —Å–±–æ—Ä–∫–∞, –∑–∞–ø—É—Å–∫, –±–µ–Ω—á–º–∞—Ä–∫–∏, Docker
‚îî‚îÄ‚îÄ README.md
```
üí° –°–æ–≤–µ—Ç—ã
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/work`, `/alloc` –∏ `/sleep` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä–µ–¥ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º.
- –û—Ç–∫—Ä—ã–≤–∞–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª–∏ —á–µ—Ä–µ–∑ `go tool pprof -http=:8081`, —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ –∏ –≥–æ—Ä—è—á–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏.
- –ú–µ—Ç—Ä–∏–∫–∏ `Prometheus` –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å –∫ `Grafana` –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏.

## Goroutine –ø—Ä–æ—Ñ–∞–π–ª

```bash
./scripts/profile-goroutine.sh
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è goroutine.prof
# –î–∞–ª–µ–µ –æ—Ç–∫—Ä–æ–µ–º –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
go tool pprof -http=:8081 ./bin/service goroutine.prof


## –°–Ω—è—Ç–∏–µ –ø–æ–ª–µ–∑–Ω–æ–≥–æ CPU-–ø—Ä–æ—Ñ–∏–ª—è

–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–π CPU-–ø—Ä–æ—Ñ–∏–ª—å –≤ –ø—Ä–æ–µ–∫—Ç–µ `go-service-profiling`, –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ä–µ–∞–ª—å–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –≤–æ –≤—Ä–µ–º—è –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è.  

### –®–∞–≥–∏

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å**

```bash
./bin/service


2. –°–æ–∑–¥–∞—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ CPU (–≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ) –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å —à–∞–≥–æ–º 3:
```bash
curl http://localhost:8080/work
# –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑
for i in {1..5}; do curl http://localhost:8080/work; done
```
–≠—Ç–æ –≤—ã–∑–æ–≤–µ—Ç —Ö–µ–Ω–¥–ª–µ—Ä WorkHandler, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é CPUHeavy –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –Ω–∞–≥—Ä—É–∑–∫–∏.

3. –°–Ω—è—Ç—å CPU-–ø—Ä–æ—Ñ–∏–ª—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å —à–∞–≥–æ–º 2:
```bash
curl "http://localhost:8080/debug/pprof/profile?seconds=30" -o cpu.prof
```
–ò–ª–∏ —á–µ—Ä–µ–∑ make-—Å–∫—Ä–∏–ø—Ç:
```bash
make cpu-prof
```
4. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
```bash
go tool pprof -http=:8081 ./bin/service cpu.prof
```
–û—Ç–∫—Ä–æ–µ—Ç—Å—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ –∞–¥—Ä–µ—Å—É http://localhost:8081.

–í –Ω—ë–º –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å:
Flamegraph ‚Äî —Ñ—É–Ω–∫—Ü–∏–∏, –≥–¥–µ —Ç—Ä–∞—Ç–∏—Ç—Å—è –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ CPU.
Call graph ‚Äî –∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏–∏ –≤—ã–∑—ã–≤–∞—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞.
Top ‚Äî —Å–ø–∏—Å–æ–∫ ¬´–≥–æ—Ä—è—á–∏—Ö¬ª —Ñ—É–Ω–∫—Ü–∏–π —Å –≤—Ä–µ–º–µ–Ω–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.
Source view ‚Äî –≤—Ä–µ–º—è –ø–æ —Å—Ç—Ä–æ–∫–∞–º –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞.

‚ö†Ô∏è –í–∞–∂–Ω–æ: –±–µ–∑ –≤—ã–∑–æ–≤–∞ /work –ø—Ä–æ—Ñ–∏–ª—å –±—É–¥–µ—Ç –ø—É—Å—Ç—ã–º (Total samples = 0), –ø–æ—Ç–æ–º—É —á—Ç–æ CPU –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è.


## –°–Ω—è—Ç–∏–µ Block-–ø—Ä–æ—Ñ–∏–ª—è

Block profile –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —É—á–∞—Å—Ç–∫–∏ –∫–æ–¥–∞, –≥–¥–µ –≥–æ—Ä—É—Ç–∏–Ω—ã –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è, –æ–∂–∏–¥–∞—è –¥–æ—Å—Ç—É–ø–∞ –∫ –º—å—é—Ç–µ–∫—Å–∞–º, –∫–∞–Ω–∞–ª–∞–º –∏–ª–∏ –¥—Ä—É–≥–∏–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—â–∏–º —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º.

### –®–∞–≥–∏

–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å
```block
./bin/service
```

–°–æ–∑–¥–∞—Ç—å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (–≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ), –Ω–∞–ø—Ä–∏–º–µ—Ä —á–µ—Ä–µ–∑ —Ö–µ–Ω–¥–ª–µ—Ä WorkHandler:
```bash
curl http://localhost:8080/work
# –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑
for i in {1..5}; do curl http://localhost:8080/work; done
```

–≠—Ç–∏ –≤—ã–∑–æ–≤—ã —Å–æ–∑–¥–∞–¥—É—Ç —Ç–æ—á–∫–∏ —Å –≤—ã—Å–æ–∫–æ–π –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–µ–π –ø–æ—Ç–æ–∫–æ–≤.

–°–Ω—è—Ç—å block-–ø—Ä–æ—Ñ–∏–ª—å:
```bash
curl "http://localhost:8080/debug/pprof/block?seconds=30" -o block.prof
```

–ò–ª–∏ —á–µ—Ä–µ–∑ make-—Å–∫—Ä–∏–ø—Ç:
```bash
make block-prof
```

–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:
```bash
go tool pprof -http=:8081 ./bin/service block.prof
```

–û—Ç–∫—Ä–æ–µ—Ç—Å—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ –∞–¥—Ä–µ—Å—É http://localhost:8081
.

–í –Ω—ë–º –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å:

`Top` ‚Äî —Ñ—É–Ω–∫—Ü–∏–∏, –≥–¥–µ –≥–æ—Ä—É—Ç–∏–Ω—ã –¥–æ–ª—å—à–µ –≤—Å–µ–≥–æ –∂–¥–∞–ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏.

`Flamegraph` ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –≤—ã–∑–æ–≤–æ–≤.

`Call graph` ‚Äî –∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏–∏ –≤—ã–∑—ã–≤–∞—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –ø—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞—Ö.

‚ö†Ô∏è –í–∞–∂–Ω–æ: –±–µ–∑ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—â–∏–µ –æ–±—ä–µ–∫—Ç—ã (`/work` –∏–ª–∏ –¥—Ä—É–≥–∏–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏) –ø—Ä–æ—Ñ–∏–ª—å –±—É–¥–µ—Ç –ø—É—Å—Ç—ã–º, –ø–æ—Ç–æ–º—É —á—Ç–æ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –Ω–µ –±—ã–ª–æ.


## üîπ –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏ (ThreadCreate –∏ Mutex)

**–ß—Ç–æ —ç—Ç–æ:**  
- **ThreadCreate** ‚Äî —Å–æ–±–∏—Ä–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ (–≥–æ—Ä—É—Ç–∏–Ω).  
- **Mutex** ‚Äî —Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏ –∑–∞ –º—å—é—Ç–µ–∫—Å—ã, –≥–¥–µ –≥–æ—Ä—É—Ç–∏–Ω—ã –∂–¥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É.  

–î–ª—è –ø–æ–ª–µ–∑–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø—Ä–æ—Ñ–∏–ª—å –Ω—É–∂–Ω–æ —Å–Ω–∏–º–∞—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å –Ω–∞–≥—Ä—É–∑–∫–æ–π:
- Mutex ‚Äî –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–Ω–∏–º–æ–∫ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏ –∑–∞ –º—å—é—Ç–µ–∫—Å—ã.
- ThreadCreate ‚Äî –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–Ω–∏–º–æ–∫ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –≥–æ—Ä—É—Ç–∏–Ω.

**–ó–∞—á–µ–º –Ω—É–∂–Ω–æ:**  
- –ü–æ–º–æ–≥–∞–µ—Ç –≤—ã—è–≤–ª—è—Ç—å —É–∑–∫–∏–µ –º–µ—Å—Ç–∞ —Å –≤—ã—Å–æ–∫–æ–π –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–µ–π.  
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –∏ —É–º–µ–Ω—å—à–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∏ –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã—Ö —É—á–∞—Å—Ç–∫–∞—Ö –∫–æ–¥–∞.

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
‚ö†Ô∏è –ï—Å–ª–∏ —Å–Ω–∏–º–∞—Ç—å –±–µ–∑ –Ω–∞–≥—Ä—É–∑–∫–∏, —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –ø–æ—á—Ç–∏ –ø—É—Å—Ç—ã–º–∏ –∏ –º–∞–ª–æ–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º–∏:
```bash
# –°–æ–∑–¥–∞—ë–º –Ω–∞–≥—Ä—É–∑–∫—É
for i in {1..5}; do curl http://localhost:8080/work & done
```

1. ThreadCreate –ø—Ä–æ—Ñ–∞–π–ª:

```bash
curl "http://localhost:8080/debug/threadcreate" -o threadcreate.prof
go tool pprof -http=:8081 ./bin/service threadcreate.prof
```

2. Mutex –ø—Ä–æ—Ñ–∞–π–ª:
```bash
curl "http://localhost:8080/debug/mutex" -o mutex.prof
go tool pprof -http=:8081 ./bin/service mutex.prof
```

| –ü—Ä–æ—Ñ–∏–ª—å      | –ß—Ç–æ –∏–∑–º–µ—Ä—è–µ—Ç                   | –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è | –ö–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è | –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–≤ |
| ------------ | ------------------------------ | -------------- | ----------- | ---------------- |
| Block        | –í—Å–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (mutex, –∫–∞–Ω–∞–ª)  | –î–∞             | –î–∞          | –ù–µ—Ç              |
| Mutex        | –¢–æ–ª—å–∫–æ –º—å—é—Ç–µ–∫—Å—ã                | –î–∞             | –î–∞          | –ù–µ—Ç              |
| ThreadCreate | –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –≥–æ—Ä—É—Ç–∏–Ω/–ø–æ—Ç–æ–∫–æ–≤ | –ù–µ—Ç            | –ù–µ—Ç         | –î–∞               |
